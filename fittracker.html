<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FitTracker Pro - Seu Personal Trainer</title>
    
    <!-- CONFIGURA√á√ïES PWA (APP DE CELULAR) -->
    <meta name="theme-color" content="#4361ee">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="FitTracker">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="msapplication-TileColor" content="#4361ee">
    
    <!-- √çCONES DO APP -->
    <link rel="icon" type="image/png" href="https://img.icons8.com/color/96/000000/dumbbell.png">
    <link rel="apple-touch-icon" href="https://img.icons8.com/color/96/000000/dumbbell.png">
    
    <!-- ARQUIVO DE CONFIGURA√á√ÉO DO APP -->
    <link rel="manifest" href="manifest.json">
    
    <!-- FONT AWESOME (√çCONES) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* RESET E CONFIGURA√á√ïES GERAIS */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }

        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --accent: #4cc9f0;
            --light: #f8f9fa;
            --dark: #212529;
            --success: #4caf50;
            --warning: #ff9800;
            --danger: #f72585;
        }

        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: var(--light);
            min-height: 100vh;
            padding-bottom: 80px;
            overflow-y: scroll;
            -webkit-overflow-scrolling: touch;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* HEADER */
        header {
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            padding: 15px 20px;
            padding-top: env(safe-area-inset-top);
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid var(--primary);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo i {
            color: var(--accent);
            font-size: 24px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        /* CARDS */
        .card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }

        .card-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            color: var(--accent);
        }

        /* TABS */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
            padding-bottom: 10px;
            -webkit-overflow-scrolling: touch;
        }

        .tab {
            padding: 12px 24px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.3s;
            min-height: 44px;
            display: flex;
            align-items: center;
        }

        .tab.active {
            background: var(--primary);
            font-weight: bold;
        }

        /* BOT√ïES (GRANDES PARA DEDOS) */
        .btn {
            padding: 15px 24px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            min-height: 50px;
            min-width: 50px;
            font-size: 16px;
            touch-action: manipulation;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        /* TIMER */
        .timer {
            font-size: 64px;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
            color: var(--accent);
        }

        /* EXERC√çCIOS */
        .exercise-list {
            display: grid;
            gap: 15px;
        }

        .exercise-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid var(--primary);
        }

        .exercise-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .sets-reps {
            display: flex;
            gap: 20px;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        .set {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .set-btn {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            border: 2px solid var(--primary);
            background: transparent;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 20px;
            transition: all 0.3s;
        }

        .set-btn.completed {
            background: var(--success);
            border-color: var(--success);
        }

        /* BARRA DE PROGRESSO */
        .progress-bar {
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            margin: 10px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            border-radius: 5px;
            transition: width 0.5s;
        }

        /* MENU INFERIOR (PARA CELULAR) */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.95);
            display: flex;
            justify-content: space-around;
            padding: 15px;
            padding-bottom: max(15px, env(safe-area-inset-bottom));
            padding-left: env(safe-area-inset-left);
            padding-right: env(safe-area-inset-right);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 1000;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            color: rgba(255, 255, 255, 0.6);
            transition: all 0.3s;
            cursor: pointer;
            min-height: 44px;
            min-width: 44px;
            justify-content: center;
        }

        .nav-item.active {
            color: var(--accent);
        }

        .nav-item i {
            font-size: 20px;
        }

        .nav-item span {
            font-size: 12px;
        }

        /* ESTAT√çSTICAS */
        .stats {
            display: grid;
            gap: 10px;
        }

        .stats p {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* DIA DE DESCANSO */
        .rest-day {
            text-align: center;
            padding: 40px 20px;
        }

        .rest-day i {
            font-size: 64px;
            color: var(--accent);
            margin-bottom: 20px;
        }

        /* RESPONSIVO - CELULAR */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .card {
                padding: 15px;
                margin-bottom: 15px;
            }
            
            .timer {
                font-size: 72px;
            }
            
            .dashboard {
                display: grid;
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .exercise-list {
                grid-template-columns: 1fr;
            }
            
            .tabs {
                padding: 10px 0;
            }
            
            .tab {
                padding: 15px 20px;
                font-size: 14px;
            }
            
            /* EVITAR ZOOM EM INPUTS */
            input, select, textarea {
                font-size: 16px !important;
            }
        }

        /* TABLET */
        @media (min-width: 769px) and (max-width: 1023px) {
            .dashboard {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
            }
            
            .exercise-list {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* DESKTOP */
        @media (min-width: 1024px) {
            .dashboard {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 20px;
            }
            
            .exercise-list {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        /* ANIMA√á√ïES */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        /* LOADING */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: var(--accent);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- CABE√áALHO -->
    <header>
        <div class="logo">
            <i class="fas fa-dumbbell"></i>
            <h1>FitTracker Pro</h1>
        </div>
        <div class="user-info">
            <span>Ol√°, Atleta!</span>
            <div class="level">üèÜ N√≠vel 5</div>
        </div>
    </header>

    <!-- CONTE√öDO PRINCIPAL -->
    <div class="container">
        <!-- ABA DOS DIAS DA SEMANA -->
        <div class="tabs" id="dayTabs">
            <!-- Os dias ser√£o gerados automaticamente pelo JavaScript -->
        </div>

        <!-- PAINEL DE CONTROLE -->
        <div class="dashboard">
            <!-- CARD DE PROGRESSO -->
            <div class="card">
                <div class="card-title">
                    <h3><i class="fas fa-chart-line"></i> Progresso Hoje</h3>
                    <span id="workoutTime">00:00</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="todayProgress" style="width: 0%"></div>
                </div>
                <p id="progressText">0 de 0 exerc√≠cios conclu√≠dos</p>
                <button class="btn btn-primary" id="completeWorkout">
                    <i class="fas fa-check"></i> Concluir Treino
                </button>
            </div>

            <!-- CARD DO TIMER -->
            <div class="card">
                <div class="card-title">
                    <h3><i class="fas fa-clock"></i> Timer de Descanso</h3>
                </div>
                <div class="timer" id="restTimer">01:30</div>
                <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
                    <button class="btn btn-primary" id="startTimer">
                        <i class="fas fa-play"></i> Iniciar
                    </button>
                    <button class="btn btn-danger" id="resetTimer">
                        <i class="fas fa-redo"></i> Resetar
                    </button>
                </div>
            </div>

            <!-- CARD DE ESTAT√çSTICAS -->
            <div class="card">
                <div class="card-title">
                    <h3><i class="fas fa-trophy"></i> Estat√≠sticas</h3>
                </div>
                <div class="stats">
                    <p>‚úÖ Treinos esta semana: <strong id="weekWorkouts">0/6</strong></p>
                    <p>üí™ Total de exerc√≠cios: <strong id="totalExercises">0</strong></p>
                    <p>‚è±Ô∏è Tempo total: <strong id="totalTime">0h 00m</strong></p>
                    <p>üìà Melhor sequ√™ncia: <strong id="bestStreak">0 dias</strong></p>
                </div>
            </div>
        </div>

        <!-- LISTA DE EXERC√çCIOS -->
        <div class="card">
            <div class="card-title">
                <h3><i class="fas fa-dumbbell"></i> Exerc√≠cios de Hoje</h3>
                <span id="exerciseCount">0 exerc√≠cios</span>
            </div>
            <div class="exercise-list" id="exerciseList">
                <!-- Os exerc√≠cios ser√£o gerados automaticamente -->
            </div>
        </div>

        <!-- CARD DE DICAS -->
        <div class="card">
            <div class="card-title">
                <h3><i class="fas fa-lightbulb"></i> Dica do Dia</h3>
            </div>
            <p id="dailyTip">Beba √°gua! A hidrata√ß√£o √© essencial para o desempenho muscular e recupera√ß√£o.</p>
        </div>
    </div>

    <!-- MENU INFERIOR (NAVEGA√á√ÉO) -->
    <nav class="bottom-nav">
        <div class="nav-item active" data-page="home">
            <i class="fas fa-home"></i>
            <span>In√≠cio</span>
        </div>
        <div class="nav-item" data-page="workout">
            <i class="fas fa-dumbbell"></i>
            <span>Treino</span>
        </div>
        <div class="nav-item" data-page="history">
            <i class="fas fa-history"></i>
            <span>Hist√≥rico</span>
        </div>
        <div class="nav-item" data-page="exercises">
            <i class="fas fa-list"></i>
            <span>Exerc√≠cios</span>
        </div>
        <div class="nav-item" data-page="profile">
            <i class="fas fa-user"></i>
            <span>Perfil</span>
        </div>
    </nav>

    <script>
        // ============================================
        // DADOS DO APLICATIVO
        // ============================================
        const appData = {
            currentDay: new Date().getDay(), // 0=Domingo, 1=Segunda, etc.
            userStats: {
                weekWorkouts: 4,
                totalExercises: 127,
                totalMinutes: 750, // 12h30m
                bestStreak: 8,
                completedWorkouts: []
            },
            timer: {
                time: 90, // 90 segundos = 1:30
                interval: null,
                running: false,
                defaultTime: 90
            },
            workoutPlan: {
                0: { // Domingo
                    name: "Descanso",
                    exercises: []
                },
                1: { // Segunda - Peito e Tr√≠ceps
                    name: "Peito & Tr√≠ceps",
                    exercises: [
                        { id: 1, name: "Supino Reto", sets: 4, reps: "10-12", weight: 60, completed: [false, false, false, false] },
                        { id: 2, name: "Crucifixo", sets: 3, reps: "12-15", weight: 20, completed: [false, false, false] },
                        { id: 3, name: "Tr√≠ceps Testa", sets: 3, reps: "12-15", weight: 25, completed: [false, false, false] },
                        { id: 4, name: "Flex√£o de Bra√ßo", sets: 4, reps: "15-20", weight: 0, completed: [false, false, false, false] }
                    ]
                },
                2: { // Ter√ßa - Costas e B√≠ceps
                    name: "Costas & B√≠ceps",
                    exercises: [
                        { id: 5, name: "Puxada Alta", sets: 4, reps: "10-12", weight: 50, completed: [false, false, false, false] },
                        { id: 6, name: "Remada Curvada", sets: 3, reps: "10-12", weight: 40, completed: [false, false, false] },
                        { id: 7, name: "Rosca Direta", sets: 3, reps: "12-15", weight: 15, completed: [false, false, false] }
                    ]
                },
                3: { // Quarta - Pernas
                    name: "Pernas",
                    exercises: [
                        { id: 8, name: "Agachamento Livre", sets: 4, reps: "8-10", weight: 80, completed: [false, false, false, false] },
                        { id: 9, name: "Leg Press", sets: 3, reps: "12-15", weight: 120, completed: [false, false, false] },
                        { id: 10, name: "Cadeira Extensora", sets: 3, reps: "15-20", weight: 40, completed: [false, false, false] }
                    ]
                },
                4: { // Quinta - Ombros
                    name: "Ombros",
                    exercises: [
                        { id: 11, name: "Desenvolvimento", sets: 4, reps: "10-12", weight: 30, completed: [false, false, false, false] },
                        { id: 12, name: "Eleva√ß√£o Lateral", sets: 3, reps: "15-20", weight: 10, completed: [false, false, false] }
                    ]
                },
                5: { // Sexta - Bra√ßos
                    name: "Bra√ßos",
                    exercises: [
                        { id: 13, name: "Rosca Scott", sets: 4, reps: "10-12", weight: 20, completed: [false, false, false, false] },
                        { id: 14, name: "Tr√≠ceps Corda", sets: 3, reps: "12-15", weight: 25, completed: [false, false, false] }
                    ]
                },
                6: { // S√°bado - Cardio
                    name: "Cardio",
                    exercises: [
                        { id: 15, name: "Esteira", sets: 1, reps: "30 min", weight: 0, completed: [false] },
                        { id: 16, name: "Bicicleta", sets: 1, reps: "20 min", weight: 0, completed: [false] }
                    ]
                }
            },
            dailyTips: [
                "Mantenha a postura correta durante os exerc√≠cios para evitar les√µes.",
                "Respire! Expire durante o esfor√ßo e inspire durante o retorno.",
                "N√£o pule o aquecimento - ele prepara seus m√∫sculos e articula√ß√µes.",
                "Aumente os pesos gradualmente para evitar les√µes.",
                "Descanse pelo menos 48 horas antes de treinar o mesmo grupo muscular.",
                "Alongue-se ap√≥s o treino para melhorar a flexibilidade.",
                "Mantenha-se hidratado durante todo o treino."
            ]
        };

        // ============================================
        // FUN√á√ïES PRINCIPAIS
        // ============================================
        
        // Quando a p√°gina carrega
        document.addEventListener('DOMContentLoaded', function() {
            initApp();
        });

        function initApp() {
            // Carregar dados salvos
            loadSavedData();
            
            // Criar abas dos dias
            createDayTabs();
            
            // Carregar exerc√≠cios do dia atual
            loadExercises(appData.currentDay);
            
            // Configurar timer
            setupTimer();
            
            // Configurar navega√ß√£o
            setupNavigation();
            
            // Configurar bot√µes
            setupButtons();
            
            // Atualizar estat√≠sticas
            updateStats();
            
            // Configurar Service Worker (para funcionar offline)
            setupServiceWorker();
            
            // Dica do dia aleat√≥ria
            showDailyTip();
        }

        // ============================================
        // FUN√á√ïES ESPEC√çFICAS
        // ============================================

        function createDayTabs() {
            const days = ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'S√°b'];
            const container = document.getElementById('dayTabs');
            container.innerHTML = '';
            
            days.forEach((day, index) => {
                const tab = document.createElement('div');
                tab.className = `tab ${index === appData.currentDay ? 'active' : ''}`;
                tab.textContent = day;
                tab.dataset.day = index;
                
                tab.addEventListener('click', () => {
                    // Remover active de todas as tabs
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    // Adicionar active na tab clicada
                    tab.classList.add('active');
                    // Carregar exerc√≠cios do dia
                    loadExercises(index);
                });
                
                container.appendChild(tab);
            });
        }

        function loadExercises(dayIndex) {
            const container = document.getElementById('exerciseList');
            const workout = appData.workoutPlan[dayIndex];
            
            // Atualizar contador
            document.getElementById('exerciseCount').textContent = 
                workout.exercises.length + (workout.exercises.length === 1 ? ' exerc√≠cio' : ' exerc√≠cios');
            
            container.innerHTML = '';
            
            // Verificar se √© dia de descanso
            if (workout.exercises.length === 0) {
                container.innerHTML = `
                    <div class="rest-day">
                        <i class="fas fa-bed"></i>
                        <h3>Dia de Descanso!</h3>
                        <p>Seu corpo precisa se recuperar para crescer mais forte.</p>
                        <p style="margin-top: 15px; color: var(--accent);">
                            <i class="fas fa-info-circle"></i> Aproveite para fazer um alongamento leve!
                        </p>
                    </div>
                `;
                updateProgress();
                return;
            }
            
            // Criar lista de exerc√≠cios
            workout.exercises.forEach((exercise, exIndex) => {
                const exerciseEl = document.createElement('div');
                exerciseEl.className = 'exercise-item';
                
                // Criar bot√µes das s√©ries
                let setsHTML = '';
                for (let i = 0; i < exercise.sets; i++) {
                    setsHTML += `
                        <div class="set">
                            <span>S√©rie ${i + 1}:</span>
                            <button class="set-btn ${exercise.completed[i] ? 'completed' : ''}" 
                                    data-ex="${exIndex}" 
                                    data-set="${i}"
                                    aria-label="${exercise.completed[i] ? 'S√©rie completada' : 'Marcar s√©rie como completada'}">
                                ${exercise.completed[i] ? '‚úì' : (i + 1)}
                            </button>
                            ${exercise.weight > 0 ? `<small>${exercise.weight}kg</small>` : ''}
                        </div>
                    `;
                }
                
                exerciseEl.innerHTML = `
                    <div class="exercise-header">
                        <h4>${exercise.name}</h4>
                        <span>${exercise.sets} √ó ${exercise.reps}</span>
                    </div>
                    <div class="sets-reps">
                        ${setsHTML}
                    </div>
                `;
                
                container.appendChild(exerciseEl);
            });
            
            // Adicionar eventos aos bot√µes de s√©ries
            document.querySelectorAll('.set-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const exIndex = parseInt(this.dataset.ex);
                    const setIndex = parseInt(this.dataset.set);
                    toggleSetComplete(dayIndex, exIndex, setIndex, this);
                });
                
                // Suporte a toque longo (para mais op√ß√µes futuras)
                btn.addEventListener('touchstart', function(e) {
                    this.touchTimer = setTimeout(() => {
                        // Toque longo - poderia abrir menu para editar peso, etc.
                        // Por enquanto s√≥ vibra (se suportado)
                        if (navigator.vibrate) navigator.vibrate(50);
                    }, 500);
                });
                
                btn.addEventListener('touchend', function(e) {
                    clearTimeout(this.touchTimer);
                });
            });
            
            updateProgress();
        }

        function toggleSetComplete(dayIndex, exIndex, setIndex, button) {
            const workout = appData.workoutPlan[dayIndex];
            const exercise = workout.exercises[exIndex];
            
            // Alternar estado
            exercise.completed[setIndex] = !exercise.completed[setIndex];
            
            // Atualizar bot√£o
            button.textContent = exercise.completed[setIndex] ? '‚úì' : (setIndex + 1);
            button.classList.toggle('completed', exercise.completed[setIndex]);
            
            // Feedback t√°til (vibra√ß√£o)
            if (navigator.vibrate) {
                navigator.vibrate(exercise.completed[setIndex] ? 30 : 10);
            }
            
            // Atualizar progresso
            updateProgress();
            
            // Salvar dados
            saveData();
        }

        function updateProgress() {
            const workout = appData.workoutPlan[appData.currentDay];
            let totalSets = 0;
            let completedSets = 0;
            let totalExercises = workout.exercises.length;
            let completedExercises = 0;
            
            workout.exercises.forEach(exercise => {
                totalSets += exercise.sets;
                let exerciseCompleted = true;
                
                exercise.completed.forEach((completed, index) => {
                    if (completed) completedSets++;
                    if (!completed && index < exercise.sets) exerciseCompleted = false;
                });
                
                if (exerciseCompleted && exercise.sets > 0) completedExercises++;
            });
            
            // Atualizar barra de progresso
            const progress = totalSets > 0 ? (completedSets / totalSets) * 100 : 0;
            document.getElementById('todayProgress').style.width = `${progress}%`;
            document.getElementById('progressText').textContent = 
                `${completedExercises} de ${totalExercises} exerc√≠cios conclu√≠dos`;
            
            // Atualizar tempo estimado
            const estimatedTime = Math.floor(completedSets * 2.5 + 30);
            const hours = Math.floor(estimatedTime / 60);
            const minutes = estimatedTime % 60;
            document.getElementById('workoutTime').textContent = 
                `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;
            
            // Habilitar/desabilitar bot√£o de concluir
            const completeBtn = document.getElementById('completeWorkout');
            if (completedExercises === totalExercises && totalExercises > 0) {
                completeBtn.disabled = false;
                completeBtn.classList.add('pulse');
            } else {
                completeBtn.disabled = true;
                completeBtn.classList.remove('pulse');
            }
        }

        function setupTimer() {
            const timerDisplay = document.getElementById('restTimer');
            const startBtn = document.getElementById('startTimer');
            const resetBtn = document.getElementById('resetTimer');
            
            function updateDisplay() {
                const minutes = Math.floor(appData.timer.time / 60);
                const seconds = appData.timer.time % 60;
                timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                // Mudar cor quando acabar o tempo
                if (appData.timer.time <= 10 && appData.timer.time > 0) {
                    timerDisplay.style.color = 'var(--danger)';
                    timerDisplay.classList.add('pulse');
                } else {
                    timerDisplay.style.color = 'var(--accent)';
                    timerDisplay.classList.remove('pulse');
                }
            }
            
            startBtn.addEventListener('click', function() {
                if (!appData.timer.running) {
                    // Iniciar timer
                    appData.timer.running = true;
                    startBtn.innerHTML = '<i class="fas fa-pause"></i> Pausar';
                    
                    appData.timer.interval = setInterval(() => {
                        if (appData.timer.time > 0) {
                            appData.timer.time--;
                            updateDisplay();
                        } else {
                            // Tempo acabou
                            clearInterval(appData.timer.interval);
                            appData.timer.running = false;
                            startBtn.innerHTML = '<i class="fas fa-play"></i> Iniciar';
                            
                            // Alerta
                            timerDisplay.textContent = "00:00";
                            timerDisplay.style.color = 'var(--success)';
                            
                            // Vibrar e tocar som (se suportado)
                            if (navigator.vibrate) navigator.vibrate([200, 100, 200]);
                            
                            // Notifica√ß√£o visual
                            alert("‚è∞ Tempo de descanso acabou! Volte ao exerc√≠cio!");
                        }
                    }, 1000);
                } else {
                    // Pausar timer
                    clearInterval(appData.timer.interval);
                    appData.timer.running = false;
                    startBtn.innerHTML = '<i class="fas fa-play"></i> Iniciar';
                }
                updateDisplay();
            });
            
            resetBtn.addEventListener('click', function() {
                clearInterval(appData.timer.interval);
                appData.timer.time = appData.timer.defaultTime;
                appData.timer.running = false;
                startBtn.innerHTML = '<i class="fas fa-play"></i> Iniciar';
                updateDisplay();
            });
            
            updateDisplay();
        }

        function setupNavigation() {
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', function() {
                    // Remover active de todos
                    document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
                    // Adicionar active no clicado
                    this.classList.add('active');
                    
                    // Aqui voc√™ pode adicionar a l√≥gica para mudar de p√°gina
                    const page = this.dataset.page;
                    showPage(page);
                });
            });
        }

        function showPage(page) {
            // Por enquanto s√≥ mostra um alerta
            // Voc√™ pode expandir isso para mostrar diferentes telas
            const messages = {
                home: "Voc√™ j√° est√° na p√°gina inicial!",
                workout: "P√°gina de treino em desenvolvimento...",
                history: "Hist√≥rico de treinos em desenvolvimento...",
                exercises: "Cat√°logo de exerc√≠cios em desenvolvimento...",
                profile: "Perfil do usu√°rio em desenvolvimento..."
            };
            
            // Feedback visual
            document.querySelectorAll('.nav-item').forEach(item => {
                if (item.dataset.page === page) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });
            
            // Mostrar mensagem (remova isso quando implementar as p√°ginas)
            console.log(`Navegando para: ${page}`);
        }

        function setupButtons() {
            // Bot√£o para completar treino
            document.getElementById('completeWorkout').addEventListener('click', function() {
                if (confirm("üéâ Parab√©ns! Deseja marcar este treino como conclu√≠do?")) {
                    // Atualizar estat√≠sticas
                    appData.userStats.weekWorkouts++;
                    appData.userStats.totalExercises += appData.workoutPlan[appData.currentDay].exercises.length;
                    appData.userStats.totalMinutes += 60; // Adiciona 1 hora
                    
                    // Salvar data do treino conclu√≠do
                    appData.userStats.completedWorkouts.push(new Date().toISOString());
                    
                    // Atualizar UI
                    this.innerHTML = '<i class="fas fa-check-double"></i> Treino Conclu√≠do!';
                    this.classList.remove('btn-primary');
                    this.classList.add('btn-success');
                    this.disabled = true;
                    this.classList.remove('pulse');
                    
                    // Atualizar estat√≠sticas
                    updateStats();
                    
                    // Salvar dados
                    saveData();
                    
                    // Feedback
                    if (navigator.vibrate) navigator.vibrate([100, 50, 100]);
                    
                    // Mostrar mensagem
                    setTimeout(() => {
                        alert("üèÜ Treino conclu√≠do com sucesso! +10 pontos de experi√™ncia!");
                    }, 300);
                }
            });
        }

        function updateStats() {
            document.getElementById('weekWorkouts').textContent = 
                `${appData.userStats.weekWorkouts}/6`;
            document.getElementById('totalExercises').textContent = 
                appData.userStats.totalExercises;
            
            const hours = Math.floor(appData.userStats.totalMinutes / 60);
            const minutes = appData.userStats.totalMinutes % 60;
            document.getElementById('totalTime').textContent = 
                `${hours}h ${minutes.toString().padStart(2, '0')}m`;
            
            document.getElementById('bestStreak').textContent = 
                `${appData.userStats.bestStreak} dias`;
        }

        function showDailyTip() {
            const tipElement = document.getElementById('dailyTip');
            const randomIndex = Math.floor(Math.random() * appData.dailyTips.length);
            tipElement.textContent = appData.dailyTips[randomIndex];
        }

        // ============================================
        // SALVAR E CARREGAR DADOS (LOCAL STORAGE)
        // ============================================
        
        function saveData() {
            try {
                localStorage.setItem('fitTrackerData', JSON.stringify(appData));
                console.log('Dados salvos com sucesso!');
            } catch (e) {
                console.error('Erro ao salvar dados:', e);
            }
        }
        
        function loadSavedData() {
            try {
                const saved = localStorage.getItem('fitTrackerData');
                if (saved) {
                    const parsed = JSON.parse(saved);
                    
                    // Manter os dados do workout plan (exerc√≠cios, completados, etc.)
                    if (parsed.workoutPlan) {
                        // Para cada dia, atualizar o estado dos exerc√≠cios
                        for (let day in parsed.workoutPlan) {
                            if (appData.workoutPlan[day] && parsed.workoutPlan[day].exercises) {
                                parsed.workoutPlan[day].exercises.forEach((savedExercise, index) => {
                                    if (appData.workoutPlan[day].exercises[index]) {
                                        // Copiar estado de completado
                                        appData.workoutPlan[day].exercises[index].completed = 
                                            savedExercise.completed || 
                                            appData.workoutPlan[day].exercises[index].completed;
                                    }
                                });
                            }
                        }
                    }
                    
                    // Manter estat√≠sticas
                    if (parsed.userStats) {
                        appData.userStats = { ...appData.userStats, ...parsed.userStats };
                    }
                    
                    console.log('Dados carregados com sucesso!');
                }
            } catch (e) {
                console.error('Erro ao carregar dados:', e);
            }
        }

        // ============================================
        // SERVICE WORKER (PARA FUNCIONAR OFFLINE)
        // ============================================
        
        function setupServiceWorker() {
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', () => {
                    navigator.serviceWorker.register('sw.js')
                        .then(registration => {
                            console.log('ServiceWorker registrado com sucesso:', registration.scope);
                        })
                        .catch(error => {
                            console.log('Falha ao registrar ServiceWorker:', error);
                        });
                });
            }
        }

        // ============================================
        // DETECTAR DISPOSITIVO M√ìVEL
        // ============================================
        
        function isMobileDevice() {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        }
        
        // Configura√ß√µes espec√≠ficas para mobile
        if (isMobileDevice()) {
            // Prevenir comportamento padr√£o de toque
            document.addEventListener('touchstart', function(e) {
                if (e.touches.length > 1) {
                    e.preventDefault();
                }
            }, { passive: false });
            
            // Adicionar classe mobile ao body
            document.body.classList.add('mobile-device');
        }

        // ============================================
        // INSTALA√á√ÉO DO PWA
        // ============================================
        
        let deferredPrompt;
        
        window.addEventListener('beforeinstallprompt', (e) => {
            // Prevenir que o prompt apare√ßa automaticamente
            e.preventDefault();
            deferredPrompt = e;
            
            // Mostrar bot√£o de instala√ß√£o (opcional)
            setTimeout(() => {
                if (confirm('Deseja instalar o FitTracker Pro como app no seu celular?')) {
                    installPWA();
                }
            }, 3000);
        });
        
        function installPWA() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        console.log('Usu√°rio aceitou a instala√ß√£o do PWA');
                    }
                    deferredPrompt = null;
                });
            }
        }
        
        // Detectar se j√° est√° instalado como PWA
        window.addEventListener('appinstalled', () => {
            console.log('PWA instalado com sucesso!');
            // Voc√™ pode mostrar uma mensagem de boas-vindas aqui
        });

        // ============================================
        // FUN√á√ÉO PARA EXPORTAR/IMPORTAR DADOS
        // ============================================
        
        window.exportData = function() {
            const dataStr = JSON.stringify(appData, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `fittracker-backup-${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
        };
        
        window.importData = function() {
            // Isso precisaria de um input file no HTML
            // Implementa√ß√£o b√°sica para futura expans√£o
            console.log('Funcionalidade de importa√ß√£o em desenvolvimento');
        };

    </script>
</body>
</html>